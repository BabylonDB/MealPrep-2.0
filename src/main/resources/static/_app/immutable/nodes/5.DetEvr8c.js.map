{"version":3,"file":"5.DetEvr8c.js","sources":["../../../../../../src/routes/shoppinglist/+page.svelte"],"sourcesContent":["<script>\r\n    import axios from \"axios\";\r\n    import { onMount } from \"svelte\";\r\n    import { jwt_token } from \"../../store\"; \r\n    const api_root = \"http://localhost:8080/api\";\r\n\r\n    let mealPlans = [];\r\n    let selectedMealPlanId = null;\r\n    let shoppingList = [];\r\n    let isLoading = false;\r\n    let errorMessage = \"\";\r\n\r\n    // Alle Meal Plans abrufen\r\n    async function getMealPlans() {\r\n        isLoading = true;\r\n        errorMessage = \"\";\r\n        try {\r\n            const response = await axios.get(`${api_root}/mealplan`, {\r\n                headers: { Authorization: \"Bearer \" + $jwt_token },\r\n            });\r\n            mealPlans = response.data;\r\n            console.log('Fetched meal plans:', mealPlans);\r\n        } catch (error) {\r\n            errorMessage = \"Could not fetch meal plans.\";\r\n            console.error(error);\r\n        } finally {\r\n            isLoading = false;\r\n        }\r\n    }\r\n\r\n    // Shopping-Liste fÃ¼r einen MealPlan abrufen\r\n    async function getShoppingList(mealPlanId) {\r\n        if (!mealPlanId) {\r\n            errorMessage = \"Please select a valid Meal Plan.\";\r\n            return;\r\n        }\r\n        isLoading = true;\r\n        shoppingList = [];\r\n        errorMessage = \"\";\r\n\r\n        try {\r\n            const response = await axios.get(`${api_root}/shoppinglist/generate/${mealPlanId}`, {\r\n                headers: { Authorization: \"Bearer \" + $jwt_token },\r\n            });\r\n            shoppingList = response.data || [];\r\n        } catch (error) {\r\n            errorMessage = error.response?.data?.message || \"Could not fetch the shopping list.\";\r\n            console.error(error);\r\n        } finally {\r\n            isLoading = false;\r\n        }\r\n    }\r\n\r\n    // Seite beim Laden Meal Plans abrufen\r\n    onMount(() => {\r\n        getMealPlans();\r\n    });\r\n</script>\r\n\r\n<h1>Shopping List Generator</h1>\r\n\r\n{#if isLoading}\r\n    <div class=\"spinner-border text-primary\" role=\"status\">\r\n        <span class=\"visually-hidden\">Loading...</span>\r\n    </div>\r\n{:else}\r\n    {#if errorMessage}\r\n        <div class=\"alert alert-danger\">{errorMessage}</div>\r\n    {/if}\r\n\r\n    <div class=\"mb-4\">\r\n        <label for=\"mealPlanSelector\" class=\"form-label\">Select a Meal Plan</label>\r\n        <select\r\n            id=\"mealPlanSelector\"\r\n            class=\"form-select\"\r\n            bind:value={selectedMealPlanId}\r\n            on:change={() => {\r\n                if (selectedMealPlanId) {\r\n                    getShoppingList(selectedMealPlanId);\r\n                }\r\n            }}\r\n        >\r\n        <option value=\"\" disabled selected={selectedMealPlanId === null}>Choose a Meal Plan</option>\r\n\r\n            {#each mealPlans as mealPlan}\r\n                <option value={mealPlan._id}>{mealPlan.name}</option>\r\n            {/each}\r\n        </select>\r\n    </div>\r\n\r\n    {#if shoppingList.length > 0}\r\n        <h2>Shopping List</h2>\r\n        <ul class=\"list-group\">\r\n            {#each shoppingList as ingredient}\r\n                <li class=\"list-group-item\">{ingredient}</li>\r\n            {/each}\r\n        </ul>\r\n    {:else}\r\n        <p>No ingredients found for the selected Meal Plan.</p>\r\n    {/if}\r\n{/if}\r\n"],"names":["ctx","create_if_block_2","i","create_if_block_1","option","option_selected_value","add_render_callback","select","insert_hydration","target","div","anchor","append_hydration","label","dirty","t_value","option_value_value","set_data","t","p","h2","ul","li","create_if_block","h1","api_root","mealPlans","selectedMealPlanId","shoppingList","isLoading","errorMessage","getMealPlans","$$invalidate","response","axios","$jwt_token","error","getShoppingList","mealPlanId","_b","_a","onMount","select_value"],"mappings":"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"}