{"version":3,"file":"3.WSmc7GCN.js","sources":["../../../../../../src/routes/mealplan/+page.svelte"],"sourcesContent":["<script>\n  import axios from \"axios\";\n  import { onMount } from \"svelte\";\n  import { jwt_token } from \"../../store\"; \n\n  const api_root = \"http://localhost:8080/api\";\n\n  let mealPlans = [];\n  let selectedMealPlan = null; // Für die Auswahl eines spezifischen MealPlans\n  let recipesForSelectedMealPlan = []; // Rezeptdetails für den ausgewählten MealPlan\n  let isLoading = false;\n  let errorMessage = \"\";\n   \n\n  // MealPlans beim Laden der Seite abrufen\n  onMount(() => {\n    fetchMealPlans();\n  });\n\n  // MealPlans abrufen\n  async function fetchMealPlans() {\n    isLoading = true;\n    errorMessage = \"\";\n    try {\n    const response = await axios.get(`${api_root}/mealplan`, {\n      headers: { Authorization: \"Bearer \" + $jwt_token }\n    });\n      mealPlans = response.data;\n    } catch (error) {\n      errorMessage = \"Could not fetch meal plans. Please try again.\";\n      console.error(error);\n    } finally {\n      isLoading = false;\n    }\n  }\n\n  // Rezepte für einen ausgewählten MealPlan abrufen\n  async function fetchRecipesForMealPlan(mealPlanId) {\n    isLoading = true;\n    errorMessage = \"\";\n    recipesForSelectedMealPlan = [];\n    try {\n    const response = await axios.get(`${api_root}/mealplan/${mealPlanId}/recipes`, {\n      headers: { Authorization: \"Bearer \" + $jwt_token }\n    });\n      recipesForSelectedMealPlan = response.data;\n      selectedMealPlan = mealPlans.find((plan) => plan.id === mealPlanId);\n    } catch (error) {\n      errorMessage = \"Could not fetch recipes for the selected meal plan.\";\n      console.error(error);\n    } finally {\n      isLoading = false;\n    }\n  }\n</script>\n\n<h1 class=\"mt-3\">Meal Plans</h1>\n\n{#if isLoading}\n  <div class=\"spinner-border text-primary\" role=\"status\">\n    <span class=\"visually-hidden\">Loading...</span>\n  </div>\n{:else if errorMessage}\n  <div class=\"alert alert-danger\">{errorMessage}</div>\n{:else}\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\">Meal Plan Name</th>\n        <th scope=\"col\">Description</th>\n        <th scope=\"col\">Actions</th>\n      </tr>\n    </thead>\n    <tbody>\n      {#each mealPlans as mealPlan}\n        <tr>\n          <td>{mealPlan.name}</td>\n          <td>{mealPlan.description}</td>\n          <td>\n            <button\n              class=\"btn btn-primary btn-sm\"\n              on:click={() => fetchRecipesForMealPlan(mealPlan.id)}\n            >\n              View Recipes\n            </button>\n          </td>\n        </tr>\n      {/each}\n    </tbody>\n  </table>\n{/if}\n\n{#if selectedMealPlan}\n  <h2 class=\"mt-4\">Recipes for \"{selectedMealPlan.name}\"</h2>\n  <p>{selectedMealPlan.description}</p>\n\n  {#if recipesForSelectedMealPlan.length > 0}\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">Recipe Name</th>\n          <th scope=\"col\">Ingredients</th>\n          <th scope=\"col\">Calories</th>\n        </tr>\n      </thead>\n      <tbody>\n        {#each recipesForSelectedMealPlan as recipe}\n          <tr>\n            <td>{recipe.name}</td>\n            <td>{recipe.ingredients.join(\", \")}</td>\n            <td>{recipe.calories}</td>\n          </tr>\n        {/each}\n      </tbody>\n    </table>\n  {:else}\n    <p>No recipes found for this meal plan.</p>\n  {/if}\n{/if}"],"names":["ctx","i","insert_hydration","target","table","anchor","append_hydration","thead","tbody","div","t0_value","t2_value","tr","td0","td1","td2","button","dirty","set_data","t0","t2","t1_value","t4_value","create_if_block_1","h2","p","t1","t4","create_if_block_2","create_if_block_3","create_if_block","h1","api_root","mealPlans","selectedMealPlan","recipesForSelectedMealPlan","isLoading","errorMessage","onMount","fetchMealPlans","$$invalidate","response","axios","$jwt_token","error","fetchRecipesForMealPlan","mealPlanId","plan","mealPlan"],"mappings":"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"}