{"version":3,"file":"3.DMOrnJZi.js","sources":["../../../../../../src/routes/mealplan/+page.svelte"],"sourcesContent":["<script>\r\n  import axios from \"axios\";\r\n  import { onMount } from \"svelte\";\r\n  import { jwt_token } from \"../../store\"; \r\n\r\n  const api_root = \"http://localhost:8080/api\";\r\n\r\n  let mealPlans = [];\r\n  let selectedMealPlan = null; // Für die Auswahl eines spezifischen MealPlans\r\n  let recipesForSelectedMealPlan = []; // Rezeptdetails für den ausgewählten MealPlan\r\n  let isLoading = false;\r\n  let errorMessage = \"\";\r\n   \r\n\r\n  // MealPlans beim Laden der Seite abrufen\r\n  onMount(() => {\r\n    fetchMealPlans();\r\n  });\r\n\r\n  // MealPlans abrufen\r\n  async function fetchMealPlans() {\r\n    isLoading = true;\r\n    errorMessage = \"\";\r\n    try {\r\n    const response = await axios.get(`${api_root}/mealplan`, {\r\n      headers: { Authorization: \"Bearer \" + $jwt_token }\r\n    });\r\n      mealPlans = response.data;\r\n    } catch (error) {\r\n      errorMessage = \"Could not fetch meal plans. Please try again.\";\r\n      console.error(error);\r\n    } finally {\r\n      isLoading = false;\r\n    }\r\n  }\r\n\r\n  // Rezepte für einen ausgewählten MealPlan abrufen\r\n  async function fetchRecipesForMealPlan(mealPlanId) {\r\n    isLoading = true;\r\n    errorMessage = \"\";\r\n    recipesForSelectedMealPlan = [];\r\n    try {\r\n    const response = await axios.get(`${api_root}/mealplan/${mealPlanId}/recipes`, {\r\n      headers: { Authorization: \"Bearer \" + $jwt_token }\r\n    });\r\n      recipesForSelectedMealPlan = response.data;\r\n      selectedMealPlan = mealPlans.find((plan) => plan.id === mealPlanId);\r\n    } catch (error) {\r\n      errorMessage = \"Could not fetch recipes for the selected meal plan.\";\r\n      console.error(error);\r\n    } finally {\r\n      isLoading = false;\r\n    }\r\n  }\r\n</script>\r\n\r\n<h1 class=\"mt-3\">Meal Plans</h1>\r\n\r\n{#if isLoading}\r\n  <div class=\"spinner-border text-primary\" role=\"status\">\r\n    <span class=\"visually-hidden\">Loading...</span>\r\n  </div>\r\n{:else if errorMessage}\r\n  <div class=\"alert alert-danger\">{errorMessage}</div>\r\n{:else}\r\n  <table class=\"table\">\r\n    <thead>\r\n      <tr>\r\n        <th scope=\"col\">Meal Plan Name</th>\r\n        <th scope=\"col\">Description</th>\r\n        <th scope=\"col\">Actions</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {#each mealPlans as mealPlan}\r\n        <tr>\r\n          <td>{mealPlan.name}</td>\r\n          <td>{mealPlan.description}</td>\r\n          <td>\r\n            <button\r\n              class=\"btn btn-primary btn-sm\"\r\n              on:click={() => fetchRecipesForMealPlan(mealPlan.id)}\r\n            >\r\n              View Recipes\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      {/each}\r\n    </tbody>\r\n  </table>\r\n{/if}\r\n\r\n{#if selectedMealPlan}\r\n  <h2 class=\"mt-4\">Recipes for \"{selectedMealPlan.name}\"</h2>\r\n  <p>{selectedMealPlan.description}</p>\r\n\r\n  {#if recipesForSelectedMealPlan.length > 0}\r\n    <table class=\"table\">\r\n      <thead>\r\n        <tr>\r\n          <th scope=\"col\">Recipe Name</th>\r\n          <th scope=\"col\">Ingredients</th>\r\n          <th scope=\"col\">Calories</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {#each recipesForSelectedMealPlan as recipe}\r\n          <tr>\r\n            <td>{recipe.name}</td>\r\n            <td>{recipe.ingredients.join(\", \")}</td>\r\n            <td>{recipe.calories}</td>\r\n          </tr>\r\n        {/each}\r\n      </tbody>\r\n    </table>\r\n  {:else}\r\n    <p>No recipes found for this meal plan.</p>\r\n  {/if}\r\n{/if}"],"names":["ctx","i","insert_hydration","target","table","anchor","append_hydration","thead","tbody","div","t0_value","t2_value","tr","td0","td1","td2","button","dirty","set_data","t0","t2","t1_value","t4_value","create_if_block_1","h2","p","t1","t4","create_if_block_2","create_if_block_3","create_if_block","h1","api_root","mealPlans","selectedMealPlan","recipesForSelectedMealPlan","isLoading","errorMessage","onMount","fetchMealPlans","$$invalidate","response","axios","$jwt_token","error","fetchRecipesForMealPlan","mealPlanId","plan","mealPlan"],"mappings":"inBA0EaA,EAAS,CAAA,CAAA,uBAAd,OAAIC,GAAA,8YATVC,EAwBQC,EAAAC,EAAAC,CAAA,EAvBNC,EAMQF,EAAAG,CAAA,SACRD,EAeQF,EAAAI,CAAA,wEAdCR,EAAS,CAAA,CAAA,oBAAd,OAAIC,GAAA,EAAA,iHAAJ,gFAX2BD,EAAY,CAAA,CAAA,0DAAZA,EAAY,CAAA,CAAA,uEAA7CE,EAAoDC,EAAAM,EAAAJ,CAAA,2BAAnBL,EAAY,CAAA,CAAA,+TAJ7CE,EAEMC,EAAAM,EAAAJ,CAAA,4CAeOK,EAAAV,MAAS,KAAI,SACbW,EAAAX,MAAS,YAAW,yhBAF3BE,EAWKC,EAAAS,EAAAP,CAAA,EAVHC,EAAwBM,EAAAC,CAAA,gBACxBP,EAA+BM,EAAAE,CAAA,gBAC/BR,EAOKM,EAAAG,CAAA,EANHT,EAKSS,EAAAC,CAAA,gDARNC,EAAA,GAAAP,KAAAA,EAAAV,MAAS,KAAI,KAAAkB,EAAAC,EAAAT,CAAA,EACbO,EAAA,GAAAN,KAAAA,EAAAX,MAAS,YAAW,KAAAkB,EAAAE,EAAAT,CAAA,iDAgBFU,EAAArB,KAAiB,KAAI,WAChDsB,EAAAtB,KAAiB,YAAW,gCAE3BA,EAA0B,CAAA,EAAC,OAAS,EAACuB,iDAHzB,eAAa,aAAuB,GAAC,iGAArC,eAAa,iBAAuB,GAAC,mIAAtDrB,EAA2DC,EAAAqB,EAAAnB,CAAA,gCAC3DH,EAAqCC,EAAAsB,EAAApB,CAAA,4CADNY,EAAA,GAAAI,KAAAA,EAAArB,KAAiB,KAAI,KAAAkB,EAAAQ,EAAAL,CAAA,EAChDJ,EAAA,GAAAK,KAAAA,EAAAtB,KAAiB,YAAW,KAAAkB,EAAAS,EAAAL,CAAA,iTAsB9BpB,EAA2CC,EAAAsB,EAAApB,CAAA,kKAVhCL,EAA0B,CAAA,CAAA,uBAA/B,OAAIC,GAAA,6YATVC,EAiBQC,EAAAC,EAAAC,CAAA,EAhBNC,EAMQF,EAAAG,CAAA,SACRD,EAQQF,EAAAI,CAAA,uEAPCR,EAA0B,CAAA,CAAA,oBAA/B,OAAIC,GAAA,EAAA,iHAAJ,qDAEOS,EAAAV,KAAO,KAAI,SACXW,EAAAX,EAAO,CAAA,EAAA,YAAY,KAAK,IAAI,EAAA,SAC5BsB,EAAAtB,KAAO,SAAQ,2TAHtBE,EAIKC,EAAAS,EAAAP,CAAA,EAHHC,EAAsBM,EAAAC,CAAA,gBACtBP,EAAwCM,EAAAE,CAAA,gBACxCR,EAA0BM,EAAAG,CAAA,wBAFrBE,EAAA,GAAAP,KAAAA,EAAAV,KAAO,KAAI,KAAAkB,EAAAC,EAAAT,CAAA,EACXO,EAAA,GAAAN,KAAAA,EAAAX,EAAO,CAAA,EAAA,YAAY,KAAK,IAAI,EAAA,KAAAkB,EAAAE,EAAAT,CAAA,EAC5BM,EAAA,GAAAK,KAAAA,EAAAtB,KAAO,SAAQ,KAAAkB,EAAAS,EAAAL,CAAA,mFApD3BtB,EAAS,CAAA,EAAA4B,GAIJ5B,EAAY,CAAA,EAAA6B,yBA8BjB7B,EAAgB,CAAA,GAAA8B,EAAA9B,CAAA,0PApCrBE,EAAgCC,EAAA4B,EAAA1B,CAAA,oIAoC3BL,EAAgB,CAAA,6HAvFb,MAAAgC,EAAW,4EAEbC,EAAS,CAAA,EACTC,EAAmB,KACnBC,EAA0B,CAAA,EAC1BC,EAAY,GACZC,EAAe,GAInBC,EAAO,IAAA,CACLC,qBAIaA,GAAc,CAC3BC,EAAA,EAAAJ,EAAY,EAAI,EAChBI,EAAA,EAAAH,EAAe,EAAE,MAEX,MAAAI,EAAiB,MAAAC,EAAM,OAAOV,CAAQ,YAAA,CAC1C,QAAW,CAAA,cAAe,UAAYW,CAAU,QAEhDV,EAAYQ,EAAS,IAAI,QAClBG,EAAK,CACZJ,EAAA,EAAAH,EAAe,+CAA+C,EAC9D,QAAQ,MAAMO,CAAK,UAEnBJ,EAAA,EAAAJ,EAAY,EAAK,GAKN,eAAAS,EAAwBC,EAAU,CAC/CN,EAAA,EAAAJ,EAAY,EAAI,EAChBI,EAAA,EAAAH,EAAe,EAAE,MACjBF,EAA0B,CAAA,CAAA,MAEpB,MAAAM,QAAiBC,EAAM,IAAO,GAAAV,CAAQ,aAAac,CAAU,WAAA,CACjE,QAAW,CAAA,cAAe,UAAYH,CAAU,QAEhDR,EAA6BM,EAAS,IAAI,MAC1CP,EAAmBD,EAAU,KAAMc,GAASA,EAAK,KAAOD,CAAU,CAAA,QAC3DF,EAAK,CACZJ,EAAA,EAAAH,EAAe,qDAAqD,EACpE,QAAQ,MAAMO,CAAK,UAEnBJ,EAAA,EAAAJ,EAAY,EAAK,yBA8BOS,EAAwBG,EAAS,EAAE"}