import{s as x,n as O,c as $,o as ee,d as te,r as le}from"../chunks/scheduler.5jWEhooB.js";import{S as se,i as oe,b,s as F,e as T,c as v,g as D,h as z,a as m,d as u,u as ne,t as A,f as L,n as B,j as C,l as V,k as M,v as Y,m as G,q as Z,o as U}from"../chunks/index.4BCV0MbB.js";import{e as j}from"../chunks/each.D6YF6ztN.js";import{a as q}from"../chunks/axios.CCb-kr4I.js";import{j as re}from"../chunks/store.CNL4ACSx.js";function J(i,e,t){const l=i.slice();return l[14]=e[t],l}function K(i,e,t){const l=i.slice();return l[17]=e[t],l}function ae(i){let e,t,l,n="Select a Meal Plan",f,o,s,c,r,g,P,S,w,d=i[2]&&Q(i),E=j(i[3]),h=[];for(let a=0;a<E.length;a+=1)h[a]=W(K(i,E,a));function y(a,p){return a[0].length>0?fe:ie}let I=y(i),k=I(i);return{c(){d&&d.c(),e=F(),t=b("div"),l=b("label"),l.textContent=n,f=F(),o=b("select"),s=b("option"),c=A("Choose a Meal Plan");for(let a=0;a<h.length;a+=1)h[a].c();g=F(),k.c(),P=T(),this.h()},l(a){d&&d.l(a),e=z(a),t=v(a,"DIV",{class:!0});var p=L(t);l=v(p,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),D(l)!=="svelte-1wi81qg"&&(l.textContent=n),f=z(p),o=v(p,"SELECT",{id:!0,class:!0});var _=L(o);s=v(_,"OPTION",{});var N=L(s);c=B(N,"Choose a Meal Plan"),N.forEach(u);for(let H=0;H<h.length;H+=1)h[H].l(_);_.forEach(u),p.forEach(u),g=z(a),k.l(a),P=T(),this.h()},h(){C(l,"for","mealPlanSelector"),C(l,"class","form-label"),s.__value="",V(s,s.__value),s.disabled=!0,s.selected=r=i[4]===null,C(o,"id","mealPlanSelector"),C(o,"class","form-select"),i[4]===void 0&&te(()=>i[6].call(o)),C(t,"class","mb-4")},m(a,p){d&&d.m(a,p),m(a,e,p),m(a,t,p),M(t,l),M(t,f),M(t,o),M(o,s),M(s,c);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(o,null);Y(o,i[4],!0),m(a,g,p),k.m(a,p),m(a,P,p),S||(w=[G(o,"change",i[6]),G(o,"change",i[7])],S=!0)},p(a,p){if(a[2]?d?d.p(a,p):(d=Q(a),d.c(),d.m(e.parentNode,e)):d&&(d.d(1),d=null),p&24&&r!==(r=a[4]===null)&&(s.selected=r),p&8){E=j(a[3]);let _;for(_=0;_<E.length;_+=1){const N=K(a,E,_);h[_]?h[_].p(N,p):(h[_]=W(N),h[_].c(),h[_].m(o,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=E.length}p&24&&Y(o,a[4]),I===(I=y(a))&&k?k.p(a,p):(k.d(1),k=I(a),k&&(k.c(),k.m(P.parentNode,P)))},d(a){a&&(u(e),u(t),u(g),u(P)),d&&d.d(a),Z(h,a),k.d(a),S=!1,le(w)}}}function ce(i){let e,t='<span class="visually-hidden">Loading...</span>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(l){e=v(l,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),D(e)!=="svelte-37zvkm"&&(e.innerHTML=t),this.h()},h(){C(e,"class","spinner-border text-primary"),C(e,"role","status")},m(l,n){m(l,e,n)},p:O,d(l){l&&u(e)}}}function Q(i){let e,t;return{c(){e=b("div"),t=A(i[2]),this.h()},l(l){e=v(l,"DIV",{class:!0});var n=L(e);t=B(n,i[2]),n.forEach(u),this.h()},h(){C(e,"class","alert alert-danger")},m(l,n){m(l,e,n),M(e,t)},p(l,n){n&4&&U(t,l[2])},d(l){l&&u(e)}}}function W(i){let e,t=i[17].name+"",l,n;return{c(){e=b("option"),l=A(t),this.h()},l(f){e=v(f,"OPTION",{});var o=L(e);l=B(o,t),o.forEach(u),this.h()},h(){e.__value=n=i[17].id,V(e,e.__value)},m(f,o){m(f,e,o),M(e,l)},p(f,o){o&8&&t!==(t=f[17].name+"")&&U(l,t),o&8&&n!==(n=f[17].id)&&(e.__value=n,V(e,e.__value))},d(f){f&&u(e)}}}function ie(i){let e,t="No ingredients found for the selected Meal Plan.";return{c(){e=b("p"),e.textContent=t},l(l){e=v(l,"P",{"data-svelte-h":!0}),D(e)!=="svelte-h99nsc"&&(e.textContent=t)},m(l,n){m(l,e,n)},p:O,d(l){l&&u(e)}}}function fe(i){let e,t="Ingredients",l,n,f=j(i[0]),o=[];for(let s=0;s<f.length;s+=1)o[s]=X(J(i,f,s));return{c(){e=b("h2"),e.textContent=t,l=F(),n=b("ul");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){e=v(s,"H2",{"data-svelte-h":!0}),D(e)!=="svelte-d4pyay"&&(e.textContent=t),l=z(s),n=v(s,"UL",{class:!0});var c=L(n);for(let r=0;r<o.length;r+=1)o[r].l(c);c.forEach(u),this.h()},h(){C(n,"class","list-group")},m(s,c){m(s,e,c),m(s,l,c),m(s,n,c);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(n,null)},p(s,c){if(c&1){f=j(s[0]);let r;for(r=0;r<f.length;r+=1){const g=J(s,f,r);o[r]?o[r].p(g,c):(o[r]=X(g),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=f.length}},d(s){s&&(u(e),u(l),u(n)),Z(o,s)}}}function X(i){let e,t=i[14]+"",l;return{c(){e=b("li"),l=A(t),this.h()},l(n){e=v(n,"LI",{class:!0});var f=L(e);l=B(f,t),f.forEach(u),this.h()},h(){C(e,"class","list-group-item")},m(n,f){m(n,e,f),M(e,l)},p(n,f){f&1&&t!==(t=n[14]+"")&&U(l,t)},d(n){n&&u(e)}}}function he(i){let e,t="Shopping List Manager",l,n;function f(c,r){return c[1]?ce:ae}let o=f(i),s=o(i);return{c(){e=b("h1"),e.textContent=t,l=F(),s.c(),n=T()},l(c){e=v(c,"H1",{"data-svelte-h":!0}),D(e)!=="svelte-8r4ain"&&(e.textContent=t),l=z(c),s.l(c),n=T()},m(c,r){m(c,e,r),m(c,l,r),s.m(c,r),m(c,n,r)},p(c,[r]){o===(o=f(c))&&s?s.p(c,r):(s.d(1),s=o(c),s&&(s.c(),s.m(n.parentNode,n)))},i:O,o:O,d(c){c&&(u(e),u(l),u(n)),s.d(c)}}}const R="http://localhost:8080/api";function ue(i,e,t){let l;$(i,re,h=>t(10,l=h));let n=[],f=[],o=!1,s="",c=[],r=null,g=[];async function P(){t(1,o=!0),t(2,s="");try{n=(await q.get(`${R}/recipe`,{headers:{Authorization:"Bearer "+l}})).data,console.log("Fetched recipes:",n)}catch(h){t(2,s="Could not fetch recipes."),console.error(h)}finally{t(1,o=!1)}}async function S(){t(1,o=!0),t(2,s="");try{const h=await q.get(`${R}/mealplan`,{headers:{Authorization:"Bearer "+l}});t(3,c=h.data),console.log("Fetched meal plans:",c),console.log("Selected Meal Plan ID:",r)}catch(h){t(2,s="Could not fetch meal plans."),console.error(h)}finally{t(1,o=!1)}}async function w(h){console.log("hELLOR"),t(1,o=!0),t(2,s=""),g=[];try{g=(await q.get(`${R}/mealplan/${h}/recipes`,{headers:{Authorization:"Bearer "+l}})).data,console.log("Fetched recipes for selected meal plan:",g),t(0,f=g.flatMap(I=>I.ingredients))}catch(y){y.response?y.response.status===401?t(2,s="Unauthorized. Please check your login."):y.response.status===403?t(2,s="Forbidden. You do not have access."):t(2,s="Error fetching recipes: "+y.response.data):t(2,s="Network error or server not reachable."),console.error("Error fetching recipes for meal plan:",y)}finally{t(1,o=!1)}}ee(()=>{P(),S()});function d(){r=ne(this),t(4,r),t(3,c)}return[f,o,s,c,r,w,d,()=>{console.log("Dropdown changed, selectedMealPlanId:",r),r&&w(r)}]}class be extends se{constructor(e){super(),oe(this,e,ue,he,x,{})}}export{be as component};
//# sourceMappingURL=6.CafelLVb.js.map
