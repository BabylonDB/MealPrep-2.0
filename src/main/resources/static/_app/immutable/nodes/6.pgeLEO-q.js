import{s as re,d as ae,n as x,r as ie,c as Q,o as W,b as ce}from"../chunks/scheduler.CJdZjHFg.js";import{S as fe,i as ue,e as b,s as F,t as U,c as k,l as V,f as A,a as D,b as Y,d as u,m as y,n as G,g as v,h as z,v as $,o as ee,q as oe,j as J,w as he}from"../chunks/index.DIjv740q.js";import{e as R}from"../chunks/each.D6YF6ztN.js";import{a as X}from"../chunks/axios.CCb-kr4I.js";import{j as pe}from"../chunks/store.lhyZ239w.js";import{p as _e}from"../chunks/stores.CDRPN3O5.js";function te(i,e,t){const s=i.slice();return s[19]=e[t],s}function le(i,e,t){const s=i.slice();return s[22]=e[t],s}function de(i){let e,t;return{c(){e=b("div"),t=U(i[2]),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=D(e);t=Y(o,i[2]),o.forEach(u),this.h()},h(){y(e,"class","alert alert-danger")},m(s,o){v(s,e,o),z(e,t)},p(s,o){o&4&&J(t,s[2])},d(s){s&&u(e)}}}function me(i){let e,t='<span class="visually-hidden">Loading...</span>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),V(e)!=="svelte-37zvkm"&&(e.innerHTML=t),this.h()},h(){y(e,"class","spinner-border text-primary"),y(e,"role","status")},m(s,o){v(s,e,o)},p:x,d(s){s&&u(e)}}}function se(i){let e,t=i[22].name+"",s,o;return{c(){e=b("option"),s=U(t),this.h()},l(a){e=k(a,"OPTION",{});var r=D(e);s=Y(r,t),r.forEach(u),this.h()},h(){e.__value=o=i[22].id,G(e,e.__value)},m(a,r){v(a,e,r),z(e,s)},p(a,r){r&8&&t!==(t=a[22].name+"")&&J(s,t),r&8&&o!==(o=a[22].id)&&(e.__value=o,G(e,e.__value))},d(a){a&&u(e)}}}function ge(i){let e,t="No ingredients found for the selected Meal Plan.";return{c(){e=b("p"),e.textContent=t},l(s){e=k(s,"P",{"data-svelte-h":!0}),V(e)!=="svelte-h99nsc"&&(e.textContent=t)},m(s,o){v(s,e,o)},p:x,d(s){s&&u(e)}}}function ve(i){let e,t="Ingredients",s,o,a=R(i[0]),r=[];for(let c=0;c<a.length;c+=1)r[c]=ne(te(i,a,c));return{c(){e=b("h2"),e.textContent=t,s=F(),o=b("ul");for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){e=k(c,"H2",{"data-svelte-h":!0}),V(e)!=="svelte-d4pyay"&&(e.textContent=t),s=A(c),o=k(c,"UL",{class:!0});var p=D(o);for(let n=0;n<r.length;n+=1)r[n].l(p);p.forEach(u),this.h()},h(){y(o,"class","list-group")},m(c,p){v(c,e,p),v(c,s,p),v(c,o,p);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(o,null)},p(c,p){if(p&1){a=R(c[0]);let n;for(n=0;n<a.length;n+=1){const d=te(c,a,n);r[n]?r[n].p(d,p):(r[n]=ne(d),r[n].c(),r[n].m(o,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=a.length}},d(c){c&&(u(e),u(s),u(o)),oe(r,c)}}}function ne(i){let e,t=i[19]+"",s;return{c(){e=b("li"),s=U(t),this.h()},l(o){e=k(o,"LI",{class:!0});var a=D(e);s=Y(a,t),a.forEach(u),this.h()},h(){y(e,"class","list-group-item")},m(o,a){v(o,e,a),z(e,s)},p(o,a){a&1&&t!==(t=o[19]+"")&&J(s,t)},d(o){o&&u(e)}}}function be(i){let e,t="Shopping List Manager",s,o,a,r,c="Select a Meal Plan",p,n,d,M,L,E,w,S,j="Supermarkt",H,I,B,T;function h(l,f){if(l[1])return me;if(l[2])return de}let C=h(i),m=C&&C(i),N=R(i[3]),g=[];for(let l=0;l<N.length;l+=1)g[l]=se(le(i,N,l));function K(l,f){return l[0].length>0?ve:ge}let q=K(i),P=q(i);return{c(){e=b("h1"),e.textContent=t,s=F(),m&&m.c(),o=F(),a=b("div"),r=b("label"),r.textContent=c,p=F(),n=b("select"),d=b("option"),M=U("Choose a Meal Plan");for(let l=0;l<g.length;l+=1)g[l].c();E=F(),P.c(),w=F(),S=b("h2"),S.textContent=j,H=F(),I=b("div"),this.h()},l(l){e=k(l,"H1",{"data-svelte-h":!0}),V(e)!=="svelte-8r4ain"&&(e.textContent=t),s=A(l),m&&m.l(l),o=A(l),a=k(l,"DIV",{class:!0});var f=D(a);r=k(f,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(r)!=="svelte-1wi81qg"&&(r.textContent=c),p=A(f),n=k(f,"SELECT",{id:!0,class:!0});var _=D(n);d=k(_,"OPTION",{});var O=D(d);M=Y(O,"Choose a Meal Plan"),O.forEach(u);for(let Z=0;Z<g.length;Z+=1)g[Z].l(_);_.forEach(u),f.forEach(u),E=A(l),P.l(l),w=A(l),S=k(l,"H2",{"data-svelte-h":!0}),V(S)!=="svelte-1ftqxc"&&(S.textContent=j),H=A(l),I=k(l,"DIV",{id:!0,class:!0}),D(I).forEach(u),this.h()},h(){y(r,"for","mealPlanSelector"),y(r,"class","form-label"),d.__value="",G(d,d.__value),d.disabled=!0,d.selected=L=i[4]===null,y(n,"id","mealPlanSelector"),y(n,"class","form-select"),i[4]===void 0&&ae(()=>i[7].call(n)),y(a,"class","mb-4"),y(I,"id","map"),y(I,"class","svelte-drfoty")},m(l,f){v(l,e,f),v(l,s,f),m&&m.m(l,f),v(l,o,f),v(l,a,f),z(a,r),z(a,p),z(a,n),z(n,d),z(d,M);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(n,null);$(n,i[4],!0),v(l,E,f),P.m(l,f),v(l,w,f),v(l,S,f),v(l,H,f),v(l,I,f),i[9](I),B||(T=[ee(n,"change",i[7]),ee(n,"change",i[8])],B=!0)},p(l,[f]){if(C===(C=h(l))&&m?m.p(l,f):(m&&m.d(1),m=C&&C(l),m&&(m.c(),m.m(o.parentNode,o))),f&24&&L!==(L=l[4]===null)&&(d.selected=L),f&8){N=R(l[3]);let _;for(_=0;_<N.length;_+=1){const O=le(l,N,_);g[_]?g[_].p(O,f):(g[_]=se(O),g[_].c(),g[_].m(n,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=N.length}f&24&&$(n,l[4]),q===(q=K(l))&&P?P.p(l,f):(P.d(1),P=q(l),P&&(P.c(),P.m(w.parentNode,w)))},i:x,o:x,d(l){l&&(u(e),u(s),u(o),u(a),u(E),u(w),u(S),u(H),u(I)),m&&m.d(l),oe(g,l),P.d(l),i[9](null),B=!1,ie(T)}}}function ke(i,e,t){let s,o;Q(i,pe,h=>t(12,s=h)),Q(i,_e,h=>t(13,o=h));const a=`${o.url.origin}/api`;let r=[],c=[],p=!1,n="",d=[],M=null,L=[],E;async function w(){t(1,p=!0),t(2,n="");try{r=(await X.get(`${a}/recipe`,{headers:{Authorization:"Bearer "+s}})).data,console.log("Fetched recipes:",r)}catch(h){t(2,n="Could not fetch recipes."),console.error(h)}finally{t(1,p=!1)}}async function S(){t(1,p=!0),t(2,n="");try{const h=await X.get(`${a}/mealplan`,{headers:{Authorization:"Bearer "+s}});t(3,d=h.data),console.log("Fetched meal plans:",d),console.log("Selected Meal Plan ID:",M)}catch(h){t(2,n="Could not fetch meal plans."),console.error(h)}finally{t(1,p=!1)}}async function j(h){console.log("hELLOR"),t(1,p=!0),t(2,n=""),L=[];try{L=(await X.get(`${a}/mealplan/${h}/recipes`,{headers:{Authorization:"Bearer "+s}})).data,console.log("Fetched recipes for selected meal plan:",L),t(0,c=L.flatMap(m=>m.ingredients))}catch(C){C.response?C.response.status===401?t(2,n="Unauthorized. Please check your login."):C.response.status===403?t(2,n="Forbidden. You do not have access."):t(2,n="Error fetching recipes: "+C.response.data):t(2,n="Network error or server not reachable."),console.error("Error fetching recipes for meal plan:",C)}finally{t(1,p=!1)}}function H(){E?new google.maps.Map(E,{center:{lat:47.4988,lng:8.7241},zoom:15}):console.error("Map container not found")}W(()=>{const h=document.createElement("script");h.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAZmEp7aVY1dFCvVMtH-i1Z2-1pgB-fX5o",h.async=!0,h.defer=!0,h.onload=H,document.head.appendChild(h)}),W(()=>{w(),S()});function I(){M=he(this),t(4,M),t(3,d)}const B=()=>{console.log("Dropdown changed, selectedMealPlanId:",M),M&&j(M)};function T(h){ce[h?"unshift":"push"](()=>{E=h,t(5,E)})}return[c,p,n,d,M,E,j,I,B,T]}class Le extends fe{constructor(e){super(),ue(this,e,ke,be,re,{})}}export{Le as component};
//# sourceMappingURL=6.pgeLEO-q.js.map
