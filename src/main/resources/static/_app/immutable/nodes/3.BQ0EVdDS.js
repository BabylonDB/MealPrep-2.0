import{s as W,n as w,c as G,o as K}from"../chunks/scheduler.5jWEhooB.js";import{S as Q,i as X,b as k,s as M,e as A,c as v,g as j,h as D,j as N,a as T,d as u,t as P,f as y,n as H,k as p,o as L,q as J,m as Z}from"../chunks/index.4BCV0MbB.js";import{e as B}from"../chunks/each.D6YF6ztN.js";import{a as Y,j as x}from"../chunks/axios.Ch7KMjJl.js";function q(f,e,r){const o=f.slice();return o[9]=e[r],o}function O(f,e,r){const o=f.slice();return o[12]=e[r],o}function $(f){let e,r,o='<tr><th scope="col">Meal Plan Name</th> <th scope="col">Description</th> <th scope="col">Actions</th></tr>',c,_,h=B(f[0]),s=[];for(let l=0;l<h.length;l+=1)s[l]=S(O(f,h,l));return{c(){e=k("table"),r=k("thead"),r.innerHTML=o,c=M(),_=k("tbody");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=v(l,"TABLE",{class:!0});var n=y(e);r=v(n,"THEAD",{"data-svelte-h":!0}),j(r)!=="svelte-1in0onf"&&(r.innerHTML=o),c=D(n),_=v(n,"TBODY",{});var t=y(_);for(let a=0;a<s.length;a+=1)s[a].l(t);t.forEach(u),n.forEach(u),this.h()},h(){N(e,"class","table")},m(l,n){T(l,e,n),p(e,r),p(e,c),p(e,_);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(_,null)},p(l,n){if(n&33){h=B(l[0]);let t;for(t=0;t<h.length;t+=1){const a=O(l,h,t);s[t]?s[t].p(a,n):(s[t]=S(a),s[t].c(),s[t].m(_,null))}for(;t<s.length;t+=1)s[t].d(1);s.length=h.length}},d(l){l&&u(e),J(s,l)}}}function ee(f){let e,r;return{c(){e=k("div"),r=P(f[4]),this.h()},l(o){e=v(o,"DIV",{class:!0});var c=y(e);r=H(c,f[4]),c.forEach(u),this.h()},h(){N(e,"class","alert alert-danger")},m(o,c){T(o,e,c),p(e,r)},p(o,c){c&16&&L(r,o[4])},d(o){o&&u(e)}}}function te(f){let e,r='<span class="visually-hidden">Loading...</span>';return{c(){e=k("div"),e.innerHTML=r,this.h()},l(o){e=v(o,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),j(e)!=="svelte-gq0gie"&&(e.innerHTML=r),this.h()},h(){N(e,"class","spinner-border text-primary"),N(e,"role","status")},m(o,c){T(o,e,c)},p:w,d(o){o&&u(e)}}}function S(f){let e,r,o=f[12].name+"",c,_,h,s=f[12].description+"",l,n,t,a,m="View Recipes",g,d,i;function b(){return f[6](f[12])}return{c(){e=k("tr"),r=k("td"),c=P(o),_=M(),h=k("td"),l=P(s),n=M(),t=k("td"),a=k("button"),a.textContent=m,g=M(),this.h()},l(C){e=v(C,"TR",{});var E=y(e);r=v(E,"TD",{});var R=y(r);c=H(R,o),R.forEach(u),_=D(E),h=v(E,"TD",{});var z=y(h);l=H(z,s),z.forEach(u),n=D(E),t=v(E,"TD",{});var F=y(t);a=v(F,"BUTTON",{class:!0,"data-svelte-h":!0}),j(a)!=="svelte-gbrnyv"&&(a.textContent=m),F.forEach(u),g=D(E),E.forEach(u),this.h()},h(){N(a,"class","btn btn-primary btn-sm")},m(C,E){T(C,e,E),p(e,r),p(r,c),p(e,_),p(e,h),p(h,l),p(e,n),p(e,t),p(t,a),p(e,g),d||(i=Z(a,"click",b),d=!0)},p(C,E){f=C,E&1&&o!==(o=f[12].name+"")&&L(c,o),E&1&&s!==(s=f[12].description+"")&&L(l,s)},d(C){C&&u(e),d=!1,i()}}}function U(f){let e,r,o=f[1].name+"",c,_,h,s,l=f[1].description+"",n,t,a;function m(i,b){return i[2].length>0?re:le}let g=m(f),d=g(f);return{c(){e=k("h2"),r=P('Recipes for "'),c=P(o),_=P('"'),h=M(),s=k("p"),n=P(l),t=M(),d.c(),a=A(),this.h()},l(i){e=v(i,"H2",{class:!0});var b=y(e);r=H(b,'Recipes for "'),c=H(b,o),_=H(b,'"'),b.forEach(u),h=D(i),s=v(i,"P",{});var C=y(s);n=H(C,l),C.forEach(u),t=D(i),d.l(i),a=A(),this.h()},h(){N(e,"class","mt-4")},m(i,b){T(i,e,b),p(e,r),p(e,c),p(e,_),T(i,h,b),T(i,s,b),p(s,n),T(i,t,b),d.m(i,b),T(i,a,b)},p(i,b){b&2&&o!==(o=i[1].name+"")&&L(c,o),b&2&&l!==(l=i[1].description+"")&&L(n,l),g===(g=m(i))&&d?d.p(i,b):(d.d(1),d=g(i),d&&(d.c(),d.m(a.parentNode,a)))},d(i){i&&(u(e),u(h),u(s),u(t),u(a)),d.d(i)}}}function le(f){let e,r="No recipes found for this meal plan.";return{c(){e=k("p"),e.textContent=r},l(o){e=v(o,"P",{"data-svelte-h":!0}),j(e)!=="svelte-j16rap"&&(e.textContent=r)},m(o,c){T(o,e,c)},p:w,d(o){o&&u(e)}}}function re(f){let e,r,o='<tr><th scope="col">Recipe Name</th> <th scope="col">Ingredients</th> <th scope="col">Calories</th></tr>',c,_,h=B(f[2]),s=[];for(let l=0;l<h.length;l+=1)s[l]=V(q(f,h,l));return{c(){e=k("table"),r=k("thead"),r.innerHTML=o,c=M(),_=k("tbody");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=v(l,"TABLE",{class:!0});var n=y(e);r=v(n,"THEAD",{"data-svelte-h":!0}),j(r)!=="svelte-hgtztm"&&(r.innerHTML=o),c=D(n),_=v(n,"TBODY",{});var t=y(_);for(let a=0;a<s.length;a+=1)s[a].l(t);t.forEach(u),n.forEach(u),this.h()},h(){N(e,"class","table")},m(l,n){T(l,e,n),p(e,r),p(e,c),p(e,_);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(_,null)},p(l,n){if(n&4){h=B(l[2]);let t;for(t=0;t<h.length;t+=1){const a=q(l,h,t);s[t]?s[t].p(a,n):(s[t]=V(a),s[t].c(),s[t].m(_,null))}for(;t<s.length;t+=1)s[t].d(1);s.length=h.length}},d(l){l&&u(e),J(s,l)}}}function V(f){let e,r,o=f[9].name+"",c,_,h,s=f[9].ingredients.join(", ")+"",l,n,t,a=f[9].calories+"",m,g;return{c(){e=k("tr"),r=k("td"),c=P(o),_=M(),h=k("td"),l=P(s),n=M(),t=k("td"),m=P(a),g=M()},l(d){e=v(d,"TR",{});var i=y(e);r=v(i,"TD",{});var b=y(r);c=H(b,o),b.forEach(u),_=D(i),h=v(i,"TD",{});var C=y(h);l=H(C,s),C.forEach(u),n=D(i),t=v(i,"TD",{});var E=y(t);m=H(E,a),E.forEach(u),g=D(i),i.forEach(u)},m(d,i){T(d,e,i),p(e,r),p(r,c),p(e,_),p(e,h),p(h,l),p(e,n),p(e,t),p(t,m),p(e,g)},p(d,i){i&4&&o!==(o=d[9].name+"")&&L(c,o),i&4&&s!==(s=d[9].ingredients.join(", ")+"")&&L(l,s),i&4&&a!==(a=d[9].calories+"")&&L(m,a)},d(d){d&&u(e)}}}function se(f){let e,r="Meal Plans",o,c,_;function h(t,a){return t[3]?te:t[4]?ee:$}let s=h(f),l=s(f),n=f[1]&&U(f);return{c(){e=k("h1"),e.textContent=r,o=M(),l.c(),c=M(),n&&n.c(),_=A(),this.h()},l(t){e=v(t,"H1",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-lgttdv"&&(e.textContent=r),o=D(t),l.l(t),c=D(t),n&&n.l(t),_=A(),this.h()},h(){N(e,"class","mt-3")},m(t,a){T(t,e,a),T(t,o,a),l.m(t,a),T(t,c,a),n&&n.m(t,a),T(t,_,a)},p(t,[a]){s===(s=h(t))&&l?l.p(t,a):(l.d(1),l=s(t),l&&(l.c(),l.m(c.parentNode,c))),t[1]?n?n.p(t,a):(n=U(t),n.c(),n.m(_.parentNode,_)):n&&(n.d(1),n=null)},i:w,o:w,d(t){t&&(u(e),u(o),u(c),u(_)),l.d(t),n&&n.d(t)}}}const I="http://localhost:8080/api";function oe(f,e,r){let o;G(f,x,m=>r(7,o=m));let c=[],_=null,h=[],s=!1,l="";console.log("JWT Token:",o),K(()=>{n()});async function n(){r(3,s=!0),r(4,l="");try{const m=await Y.get(`${I}/mealplan`,{headers:{Authorization:"Bearer "+o}});r(0,c=m.data)}catch(m){m.response?m.response.status===401?r(4,l="Unauthorized. Please check your login."):m.response.status===403?r(4,l="Forbidden. You do not have access."):r(4,l="Error fetching meal plans: "+m.response.data):r(4,l="Network error or server not reachable."),console.error("Error fetching meal plans:",m)}finally{r(3,s=!1)}}async function t(m){r(3,s=!0),r(4,l=""),r(2,h=[]);try{const g=await Y.get(`${I}/mealplan/${m}/recipes`,{headers:{Authorization:"Bearer "+o}});r(2,h=g.data),r(1,_=c.find(d=>d.id===m))}catch(g){g.response?g.response.status===401?r(4,l="Unauthorized. Please check your login."):g.response.status===403?r(4,l="Forbidden. You do not have access."):r(4,l="Error fetching recipes: "+g.response.data):r(4,l="Network error or server not reachable."),console.error("Error fetching recipes for meal plan:",g)}finally{r(3,s=!1)}}return[c,_,h,s,l,t,m=>t(m.id)]}class fe extends Q{constructor(e){super(),X(this,e,oe,se,W,{})}}export{fe as component};
//# sourceMappingURL=3.BQ0EVdDS.js.map
