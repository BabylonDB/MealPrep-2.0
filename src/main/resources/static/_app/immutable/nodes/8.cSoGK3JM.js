import{s as Se,n as ge,r as Fe,c as Pe,o as xe}from"../chunks/scheduler.CJdZjHFg.js";import{S as Ye,i as Ge,e as u,s as b,t as oe,k as Ve,c as f,l as R,f as C,a as D,d as i,b as ie,m as a,g as k,h as n,n as Q,o as W,j as ue,q as Je}from"../chunks/index.DIjv740q.js";import{e as He}from"../chunks/each.D6YF6ztN.js";import{a as Ee}from"../chunks/axios.CCb-kr4I.js";import{j as Ke}from"../chunks/store.lhyZ239w.js";import{p as Qe}from"../chunks/stores.CDRPN3O5.js";function Me(r,t,l){const s=r.slice();return s[4]=t[l],s}function ze(r){let t,l;return{c(){t=u("div"),l=oe(r[2]),this.h()},l(s){t=f(s,"DIV",{class:!0});var h=D(t);l=ie(h,r[2]),h.forEach(i),this.h()},h(){a(t,"class","alert alert-danger")},m(s,h){k(s,t,h),n(t,l)},p(s,h){h&4&&ue(l,s[2])},d(s){s&&i(t)}}}function je(r){let t,l="Cancel",s,h;return{c(){t=u("button"),t.textContent=l,this.h()},l(p){t=f(p,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1jw19kd"&&(t.textContent=l),this.h()},h(){a(t,"type","button"),a(t,"class","btn btn-secondary ms-2")},m(p,_){k(p,t,_),s||(h=W(t,"click",r[8]),s=!0)},p:ge,d(p){p&&i(t),s=!1,h()}}}function Oe(r){let t,l='<span class="visually-hidden">Loading...</span>';return{c(){t=u("div"),t.innerHTML=l,this.h()},l(s){t=f(s,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),R(t)!=="svelte-gq0gie"&&(t.innerHTML=l),this.h()},h(){a(t,"class","spinner-border text-primary"),a(t,"role","status")},m(s,h){k(s,t,h)},d(s){s&&i(t)}}}function qe(r){let t,l,s=r[4].name+"",h,p,_,d=r[4].email+"",E,N,z,y=(r[4].preferences||"N/A")+"",x,L,U,H,J="Edit",w,M,j="Delete",O,q,c;function Y(){return r[13](r[4])}function B(){return r[14](r[4])}return{c(){t=u("tr"),l=u("td"),h=oe(s),p=b(),_=u("td"),E=oe(d),N=b(),z=u("td"),x=oe(y),L=b(),U=u("td"),H=u("button"),H.textContent=J,w=b(),M=u("button"),M.textContent=j,O=b(),this.h()},l(F){t=f(F,"TR",{});var m=D(t);l=f(m,"TD",{});var S=D(l);h=ie(S,s),S.forEach(i),p=C(m),_=f(m,"TD",{});var ne=D(_);E=ie(ne,d),ne.forEach(i),N=C(m),z=f(m,"TD",{});var $=D(z);x=ie($,y),$.forEach(i),L=C(m),U=f(m,"TD",{});var A=D(U);H=f(A,"BUTTON",{class:!0,"data-svelte-h":!0}),R(H)!=="svelte-iiwyyv"&&(H.textContent=J),w=C(A),M=f(A,"BUTTON",{class:!0,"data-svelte-h":!0}),R(M)!=="svelte-1irvc8p"&&(M.textContent=j),A.forEach(i),O=C(m),m.forEach(i),this.h()},h(){a(H,"class","btn btn-warning btn-sm"),a(M,"class","btn btn-danger btn-sm ms-2")},m(F,m){k(F,t,m),n(t,l),n(l,h),n(t,p),n(t,_),n(_,E),n(t,N),n(t,z),n(z,x),n(t,L),n(t,U),n(U,H),n(U,w),n(U,M),n(t,O),q||(c=[W(H,"click",Y),W(M,"click",B)],q=!0)},p(F,m){r=F,m&1&&s!==(s=r[4].name+"")&&ue(h,s),m&1&&d!==(d=r[4].email+"")&&ue(E,d),m&1&&y!==(y=(r[4].preferences||"N/A")+"")&&ue(x,y)},d(F){F&&i(t),q=!1,Fe(c)}}}function Re(r){let t,l="No users available.";return{c(){t=u("p"),t.textContent=l},l(s){t=f(s,"P",{"data-svelte-h":!0}),R(t)!=="svelte-1hgwweq"&&(t.textContent=l)},m(s,h){k(s,t,h)},d(s){s&&i(t)}}}function We(r){let t,l="User Management",s,h,p,_,d,E,N="Name",z,y,x,L,U,H="Email",J,w,M,j,O,q,c="Password",Y,B,F,m,S,ne="Preferences",$,A,Ue,K,ae=r[1]?"Update User":"Add User",fe,ke,ce,de,pe,ee,X,Ie="All Users",he,G,te,De="<tr><th>Name</th> <th>Email</th> <th>Preferences</th> <th>Actions</th></tr>",we,le,me,re,Te,Ne,g=r[2]&&ze(r),I=r[1]&&je(r),P=r[3]&&Oe(),se=He(r[0]),T=[];for(let e=0;e<se.length;e+=1)T[e]=qe(Me(r,se,e));let V=r[0].length===0&&!r[3]&&Re();return{c(){t=u("h1"),t.textContent=l,s=b(),g&&g.c(),h=b(),p=u("form"),_=u("div"),d=u("div"),E=u("label"),E.textContent=N,z=b(),y=u("input"),x=b(),L=u("div"),U=u("label"),U.textContent=H,J=b(),w=u("input"),M=b(),j=u("div"),O=u("div"),q=u("label"),q.textContent=c,Y=b(),B=u("input"),F=b(),m=u("div"),S=u("label"),S.textContent=ne,$=b(),A=u("input"),Ue=b(),K=u("button"),fe=oe(ae),ke=b(),I&&I.c(),ce=b(),de=u("hr"),pe=b(),P&&P.c(),ee=b(),X=u("h2"),X.textContent=Ie,he=b(),G=u("table"),te=u("thead"),te.innerHTML=De,we=b(),le=u("tbody");for(let e=0;e<T.length;e+=1)T[e].c();me=b(),V&&V.c(),re=Ve(),this.h()},l(e){t=f(e,"H1",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-9mzzxm"&&(t.textContent=l),s=C(e),g&&g.l(e),h=C(e),p=f(e,"FORM",{class:!0});var o=D(p);_=f(o,"DIV",{class:!0});var v=D(_);d=f(v,"DIV",{class:!0});var Z=D(d);E=f(Z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(E)!=="svelte-17mpp60"&&(E.textContent=N),z=C(Z),y=f(Z,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),Z.forEach(i),x=C(v),L=f(v,"DIV",{class:!0});var _e=D(L);U=f(_e,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(U)!=="svelte-7zanfm"&&(U.textContent=H),J=C(_e),w=f(_e,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),_e.forEach(i),v.forEach(i),M=C(o),j=f(o,"DIV",{class:!0});var ve=D(j);O=f(ve,"DIV",{class:!0});var be=D(O);q=f(be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(q)!=="svelte-tyrfrg"&&(q.textContent=c),Y=C(be),B=f(be,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),be.forEach(i),F=C(ve),m=f(ve,"DIV",{class:!0});var Ce=D(m);S=f(Ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(S)!=="svelte-1vw6fvm"&&(S.textContent=ne),$=C(Ce),A=f(Ce,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),Ce.forEach(i),ve.forEach(i),Ue=C(o),K=f(o,"BUTTON",{type:!0,class:!0});var Le=D(K);fe=ie(Le,ae),Le.forEach(i),ke=C(o),I&&I.l(o),o.forEach(i),ce=C(e),de=f(e,"HR",{}),pe=C(e),P&&P.l(e),ee=C(e),X=f(e,"H2",{"data-svelte-h":!0}),R(X)!=="svelte-uy9p0r"&&(X.textContent=Ie),he=C(e),G=f(e,"TABLE",{class:!0});var ye=D(G);te=f(ye,"THEAD",{"data-svelte-h":!0}),R(te)!=="svelte-1isxlvj"&&(te.innerHTML=De),we=C(ye),le=f(ye,"TBODY",{});var Be=D(le);for(let Ae=0;Ae<T.length;Ae+=1)T[Ae].l(Be);Be.forEach(i),ye.forEach(i),me=C(e),V&&V.l(e),re=Ve(),this.h()},h(){a(t,"class","mt-3"),a(E,"for","name"),a(E,"class","form-label"),a(y,"type","text"),a(y,"id","name"),a(y,"class","form-control"),a(y,"placeholder","Enter user name"),a(d,"class","col"),a(U,"for","email"),a(U,"class","form-label"),a(w,"type","email"),a(w,"id","email"),a(w,"class","form-control"),a(w,"placeholder","Enter user email"),a(L,"class","col"),a(_,"class","row mb-3"),a(q,"for","password"),a(q,"class","form-label"),a(B,"type","password"),a(B,"id","password"),a(B,"class","form-control"),a(B,"placeholder","Enter user password"),a(O,"class","col"),a(S,"for","preferences"),a(S,"class","form-label"),a(A,"type","text"),a(A,"id","preferences"),a(A,"class","form-control"),a(A,"placeholder","e.g., Vegetarian, Fitness"),a(m,"class","col"),a(j,"class","row mb-3"),a(K,"type","button"),a(K,"class","btn btn-primary"),a(p,"class","mb-5"),a(G,"class","table")},m(e,o){k(e,t,o),k(e,s,o),g&&g.m(e,o),k(e,h,o),k(e,p,o),n(p,_),n(_,d),n(d,E),n(d,z),n(d,y),Q(y,r[4].name),n(_,x),n(_,L),n(L,U),n(L,J),n(L,w),Q(w,r[4].email),n(p,M),n(p,j),n(j,O),n(O,q),n(O,Y),n(O,B),Q(B,r[4].password),n(j,F),n(j,m),n(m,S),n(m,$),n(m,A),Q(A,r[4].preferences),n(p,Ue),n(p,K),n(K,fe),n(p,ke),I&&I.m(p,null),k(e,ce,o),k(e,de,o),k(e,pe,o),P&&P.m(e,o),k(e,ee,o),k(e,X,o),k(e,he,o),k(e,G,o),n(G,te),n(G,we),n(G,le);for(let v=0;v<T.length;v+=1)T[v]&&T[v].m(le,null);k(e,me,o),V&&V.m(e,o),k(e,re,o),Te||(Ne=[W(y,"input",r[9]),W(w,"input",r[10]),W(B,"input",r[11]),W(A,"input",r[12]),W(K,"click",r[5])],Te=!0)},p(e,[o]){if(e[2]?g?g.p(e,o):(g=ze(e),g.c(),g.m(h.parentNode,h)):g&&(g.d(1),g=null),o&16&&y.value!==e[4].name&&Q(y,e[4].name),o&16&&w.value!==e[4].email&&Q(w,e[4].email),o&16&&B.value!==e[4].password&&Q(B,e[4].password),o&16&&A.value!==e[4].preferences&&Q(A,e[4].preferences),o&2&&ae!==(ae=e[1]?"Update User":"Add User")&&ue(fe,ae),e[1]?I?I.p(e,o):(I=je(e),I.c(),I.m(p,null)):I&&(I.d(1),I=null),e[3]?P||(P=Oe(),P.c(),P.m(ee.parentNode,ee)):P&&(P.d(1),P=null),o&193){se=He(e[0]);let v;for(v=0;v<se.length;v+=1){const Z=Me(e,se,v);T[v]?T[v].p(Z,o):(T[v]=qe(Z),T[v].c(),T[v].m(le,null))}for(;v<T.length;v+=1)T[v].d(1);T.length=se.length}e[0].length===0&&!e[3]?V||(V=Re(),V.c(),V.m(re.parentNode,re)):V&&(V.d(1),V=null)},i:ge,o:ge,d(e){e&&(i(t),i(s),i(h),i(p),i(ce),i(de),i(pe),i(ee),i(X),i(he),i(G),i(me),i(re)),g&&g.d(e),I&&I.d(),P&&P.d(e),Je(T,e),V&&V.d(e),Te=!1,Fe(Ne)}}}function Xe(r,t,l){let s,h;Pe(r,Ke,c=>l(15,s=c)),Pe(r,Qe,c=>l(16,h=c));const p=`${h.url.origin}/api/user`;let _=[],d={name:"",email:"",password:"",preferences:""},E=null,N="",z=!1;async function y(){l(3,z=!0),l(2,N="");try{const c=await Ee.get(p,{headers:{Authorization:"Bearer "+s}});console.log("API Response:",c.data),Array.isArray(c.data)?l(0,_=c.data):(console.error("Unexpected API response format:",c.data),l(0,_=[]),l(2,N="Unexpected data format from server."))}catch(c){l(2,N="Could not fetch users."),console.error("Error fetching users:",c.response||c.message)}finally{l(3,z=!1)}}async function x(){if(!d.name||!d.email){l(2,N="Name and Email are required.");return}try{E?(await Ee.put(`${p}/${E}`,d,{headers:{Authorization:"Bearer "+s}}),alert("User updated successfully.")):(await Ee.post(p,d,{headers:{Authorization:"Bearer "+s}}),alert("User added successfully.")),H(),y()}catch(c){l(2,N="Could not save user."),console.error("Error saving user:",c)}}async function L(c){try{await Ee.delete(`${p}/${c}`,{headers:{Authorization:"Bearer "+s}}),alert("User deleted successfully."),y()}catch(Y){l(2,N="Could not delete user."),console.error("Error deleting user:",Y)}}function U(c){if(!c){console.error("Invalid ID provided for editUser:",c);return}if(!Array.isArray(_)){console.error("Users is not an array:",_);return}const Y=_.find(B=>B.id===c);Y?(l(4,d={...Y}),l(1,E=c)):console.error("User not found with ID:",c)}function H(){l(4,d={name:"",email:"",password:"",preferences:""}),l(1,E=null),l(2,N="")}xe(()=>{y()});function J(){d.name=this.value,l(4,d)}function w(){d.email=this.value,l(4,d)}function M(){d.password=this.value,l(4,d)}function j(){d.preferences=this.value,l(4,d)}return[_,E,N,z,d,x,L,U,H,J,w,M,j,c=>U(c.id),c=>L(c.id)]}class st extends Ye{constructor(t){super(),Ge(this,t,Xe,We,Se,{})}}export{st as component};
//# sourceMappingURL=8.cSoGK3JM.js.map
