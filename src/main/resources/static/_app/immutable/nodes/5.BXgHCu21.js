import{s as Te,n as _e,r as Ee,c as ve,o as ke,i as ye}from"../chunks/scheduler.CJdZjHFg.js";import{S as Ie,i as Be,e as i,t as x,s as k,c,a as y,b as $,d as p,f as I,l as Y,m as r,g as M,h as t,n as Q,o as W,j as ee,r as Re,q as De}from"../chunks/index.mBUFKwsa.js";import{e as be}from"../chunks/each.D6YF6ztN.js";import{a as ae}from"../chunks/axios.CCb-kr4I.js";import{j as Ae}from"../chunks/store.Bl-ufj5Y.js";import{p as je}from"../chunks/stores.BjvLRQeR.js";function ge(e,a,o){const _=e.slice();return _[2]=a[o],_}function Ce(e){let a,o,_=e[2].name+"",j,h,E,n=(e[2].ingredients?e[2].ingredients.join(", "):"")+"",b,U,w,v=e[2].calories+"",H,B,g,D,q="Edit",T,A,l="Delete",f,m,X;function Z(){return e[10](e[2])}function L(){return e[11](e[2])}return{c(){a=i("tr"),o=i("td"),j=x(_),h=k(),E=i("td"),b=x(n),U=k(),w=i("td"),H=x(v),B=k(),g=i("td"),D=i("button"),D.textContent=q,T=k(),A=i("button"),A.textContent=l,f=k(),this.h()},l(O){a=c(O,"TR",{});var u=y(a);o=c(u,"TD",{});var z=y(o);j=$(z,_),z.forEach(p),h=I(u),E=c(u,"TD",{});var P=y(E);b=$(P,n),P.forEach(p),U=I(u),w=c(u,"TD",{});var S=y(w);H=$(S,v),S.forEach(p),B=I(u),g=c(u,"TD",{});var N=y(g);D=c(N,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(D)!=="svelte-533k1u"&&(D.textContent=q),T=I(N),A=c(N,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(A)!=="svelte-epn168"&&(A.textContent=l),N.forEach(p),f=I(u),u.forEach(p),this.h()},h(){r(D,"class","btn btn-secondary btn-sm"),r(A,"class","btn btn-danger btn-sm")},m(O,u){M(O,a,u),t(a,o),t(o,j),t(a,h),t(a,E),t(E,b),t(a,U),t(a,w),t(w,H),t(a,B),t(a,g),t(g,D),t(g,T),t(g,A),t(a,f),m||(X=[W(D,"click",Z),W(A,"click",L)],m=!0)},p(O,u){e=O,u&1&&_!==(_=e[2].name+"")&&ee(j,_),u&1&&n!==(n=(e[2].ingredients?e[2].ingredients.join(", "):"")+"")&&ee(b,n),u&1&&v!==(v=e[2].calories+"")&&ee(H,v)},d(O){O&&p(a),m=!1,Ee(X)}}}function Le(e){let a,o=e[1]?"Edit Recipe":"Create Recipe",_,j,h,E,n,b,U="Name",w,v,H,B,g,D="Ingredients (comma-separated)",q,T,A,l,f,m,X="Calories",Z,L,O,u,z=e[1]?"Update":"Submit",P,S,N,ue="All Recipes",te,V,G,de='<tr><th scope="col">Name</th> <th scope="col">Ingredients</th> <th scope="col">Calories</th> <th scope="col">Actions</th></tr>',oe,J,ie,pe,K=be(e[0]),R=[];for(let s=0;s<K.length;s+=1)R[s]=Ce(ge(e,K,s));return{c(){a=i("h1"),_=x(o),j=k(),h=i("form"),E=i("div"),n=i("div"),b=i("label"),b.textContent=U,w=k(),v=i("input"),H=k(),B=i("div"),g=i("label"),g.textContent=D,q=k(),T=i("input"),A=k(),l=i("div"),f=i("div"),m=i("label"),m.textContent=X,Z=k(),L=i("input"),O=k(),u=i("button"),P=x(z),S=k(),N=i("h1"),N.textContent=ue,te=k(),V=i("table"),G=i("thead"),G.innerHTML=de,oe=k(),J=i("tbody");for(let s=0;s<R.length;s+=1)R[s].c();this.h()},l(s){a=c(s,"H1",{class:!0});var C=y(a);_=$(C,o),C.forEach(p),j=I(s),h=c(s,"FORM",{class:!0});var d=y(h);E=c(d,"DIV",{class:!0});var F=y(E);n=c(F,"DIV",{class:!0});var ne=y(n);b=c(ne,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Y(b)!=="svelte-15kbfjq"&&(b.textContent=U),w=I(ne),v=c(ne,"INPUT",{class:!0,id:!0,type:!0}),ne.forEach(p),H=I(F),B=c(F,"DIV",{class:!0});var le=y(B);g=c(le,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Y(g)!=="svelte-1mkxfia"&&(g.textContent=D),q=I(le),T=c(le,"INPUT",{class:!0,id:!0,type:!0}),le.forEach(p),F.forEach(p),A=I(d),l=c(d,"DIV",{class:!0});var fe=y(l);f=c(fe,"DIV",{class:!0});var se=y(f);m=c(se,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Y(m)!=="svelte-1phwgci"&&(m.textContent=X),Z=I(se),L=c(se,"INPUT",{class:!0,id:!0,type:!0}),se.forEach(p),fe.forEach(p),O=I(d),u=c(d,"BUTTON",{type:!0,class:!0});var he=y(u);P=$(he,z),he.forEach(p),d.forEach(p),S=I(s),N=c(s,"H1",{"data-svelte-h":!0}),Y(N)!=="svelte-9hymne"&&(N.textContent=ue),te=I(s),V=c(s,"TABLE",{class:!0});var re=y(V);G=c(re,"THEAD",{"data-svelte-h":!0}),Y(G)!=="svelte-1qn73xh"&&(G.innerHTML=de),oe=I(re),J=c(re,"TBODY",{});var me=y(J);for(let ce=0;ce<R.length;ce+=1)R[ce].l(me);me.forEach(p),re.forEach(p),this.h()},h(){r(a,"class","mt-3"),r(b,"class","form-label"),r(b,"for","name"),r(v,"class","form-control"),r(v,"id","name"),r(v,"type","text"),r(n,"class","col"),r(g,"class","form-label"),r(g,"for","ingredients"),r(T,"class","form-control"),r(T,"id","ingredients"),r(T,"type","text"),r(B,"class","col"),r(E,"class","row mb-3"),r(m,"class","form-label"),r(m,"for","calories"),r(L,"class","form-control"),r(L,"id","calories"),r(L,"type","number"),r(f,"class","col"),r(l,"class","row mb-3"),r(u,"type","button"),r(u,"class","btn btn-primary"),r(h,"class","mb-5"),r(V,"class","table")},m(s,C){M(s,a,C),t(a,_),M(s,j,C),M(s,h,C),t(h,E),t(E,n),t(n,b),t(n,w),t(n,v),Q(v,e[2].name),t(E,H),t(E,B),t(B,g),t(B,q),t(B,T),Q(T,e[2].ingredients),t(h,A),t(h,l),t(l,f),t(f,m),t(f,Z),t(f,L),Q(L,e[2].calories),t(h,O),t(h,u),t(u,P),M(s,S,C),M(s,N,C),M(s,te,C),M(s,V,C),t(V,G),t(V,oe),t(V,J);for(let d=0;d<R.length;d+=1)R[d]&&R[d].m(J,null);ie||(pe=[W(v,"input",e[7]),W(T,"input",e[8]),W(L,"input",e[9]),W(u,"click",function(){ye(e[1]?e[6]:e[3])&&(e[1]?e[6]:e[3]).apply(this,arguments)})],ie=!0)},p(s,[C]){if(e=s,C&2&&o!==(o=e[1]?"Edit Recipe":"Create Recipe")&&ee(_,o),C&4&&v.value!==e[2].name&&Q(v,e[2].name),C&4&&T.value!==e[2].ingredients&&Q(T,e[2].ingredients),C&4&&Re(L.value)!==e[2].calories&&Q(L,e[2].calories),C&2&&z!==(z=e[1]?"Update":"Submit")&&ee(P,z),C&49){K=be(e[0]);let d;for(d=0;d<K.length;d+=1){const F=ge(e,K,d);R[d]?R[d].p(F,C):(R[d]=Ce(F),R[d].c(),R[d].m(J,null))}for(;d<R.length;d+=1)R[d].d(1);R.length=K.length}},i:_e,o:_e,d(s){s&&(p(a),p(j),p(h),p(S),p(N),p(te),p(V)),De(R,s),ie=!1,Ee(pe)}}}function Ne(e,a,o){let _,j;ve(e,Ae,l=>o(12,_=l)),ve(e,je,l=>o(13,j=l));const h=`${j.url.origin}/api`;let E=[],n={name:null,ingredients:null,calories:null},b=null;ke(()=>{U()});function U(){var l={method:"get",url:h+"/recipe",headers:{Authorization:"Bearer "+_}};ae(l).then(function(f){o(0,E=f.data)}).catch(function(f){alert("Could not fetch recipes"),console.log(f)})}function w(){const l=n.ingredients?n.ingredients.split(",").map(m=>m.trim()):[],f={name:n.name||"",ingredients:l,calories:parseInt(n.calories,10)||0};ae.post(h+"/recipe",f,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+_}}).then(function(){alert("Recipe created successfully"),o(2,n={name:"",ingredients:"",calories:""}),U()}).catch(function(m){alert("Could not create recipe"),console.error("Error:",m)})}function v(l){ae.delete(`${h}/recipe/${l}`,{headers:{Authorization:"Bearer "+_}}).then(()=>{alert("Recipe deleted successfully"),U()}).catch(f=>{alert("Could not delete recipe"),console.error("Error:",f)})}function H(l){o(1,b=l.id),o(2,n={name:l.name,ingredients:l.ingredients.join(", "),calories:l.calories})}function B(){const l=n.ingredients?n.ingredients.split(",").map(m=>m.trim()):[],f={name:n.name||"",ingredients:l,calories:parseInt(n.calories,10)||0};ae.put(`${h}/recipe/${b}`,f,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+_}}).then(()=>{alert("Recipe updated successfully"),o(2,n={name:"",ingredients:"",calories:""}),o(1,b=null),U()}).catch(m=>{alert("Could not update recipe"),console.error("Error:",m)})}function g(){n.name=this.value,o(2,n)}function D(){n.ingredients=this.value,o(2,n)}function q(){n.calories=Re(this.value),o(2,n)}return[E,b,n,w,v,H,B,g,D,q,l=>H(l),l=>v(l.id)]}class ze extends Ie{constructor(a){super(),Be(this,a,Ne,Le,Te,{})}}export{ze as component};
//# sourceMappingURL=5.BXgHCu21.js.map
