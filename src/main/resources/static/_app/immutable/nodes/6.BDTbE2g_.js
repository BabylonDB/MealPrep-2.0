import{s as re,e as ae,n as R,r as ce,c as ie,o as W,b as fe}from"../chunks/scheduler.KmlgN0bi.js";import{S as ue,i as he,b,s as z,t as U,c as k,g as j,h as D,f as w,n as Y,d as u,j as C,l as J,a as g,k as S,u as $,m as ee,q as ne,o as K,v as pe}from"../chunks/index.mX1UHVfl.js";import{e as x}from"../chunks/each.D6YF6ztN.js";import{a as G}from"../chunks/axios.CCb-kr4I.js";import{j as _e}from"../chunks/store.DX7lDXQD.js";function te(i,e,t){const s=i.slice();return s[17]=e[t],s}function le(i,e,t){const s=i.slice();return s[20]=e[t],s}function de(i){let e,t;return{c(){e=b("div"),t=U(i[2]),this.h()},l(s){e=k(s,"DIV",{class:!0});var n=w(e);t=Y(n,i[2]),n.forEach(u),this.h()},h(){C(e,"class","alert alert-danger")},m(s,n){g(s,e,n),S(e,t)},p(s,n){n&4&&K(t,s[2])},d(s){s&&u(e)}}}function me(i){let e,t='<span class="visually-hidden">Loading...</span>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),j(e)!=="svelte-37zvkm"&&(e.innerHTML=t),this.h()},h(){C(e,"class","spinner-border text-primary"),C(e,"role","status")},m(s,n){g(s,e,n)},p:R,d(s){s&&u(e)}}}function se(i){let e,t=i[20].name+"",s,n;return{c(){e=b("option"),s=U(t),this.h()},l(c){e=k(c,"OPTION",{});var r=w(e);s=Y(r,t),r.forEach(u),this.h()},h(){e.__value=n=i[20].id,J(e,e.__value)},m(c,r){g(c,e,r),S(e,s)},p(c,r){r&8&&t!==(t=c[20].name+"")&&K(s,t),r&8&&n!==(n=c[20].id)&&(e.__value=n,J(e,e.__value))},d(c){c&&u(e)}}}function ge(i){let e,t="No ingredients found for the selected Meal Plan.";return{c(){e=b("p"),e.textContent=t},l(s){e=k(s,"P",{"data-svelte-h":!0}),j(e)!=="svelte-h99nsc"&&(e.textContent=t)},m(s,n){g(s,e,n)},p:R,d(s){s&&u(e)}}}function ve(i){let e,t="Ingredients",s,n,c=x(i[0]),r=[];for(let a=0;a<c.length;a+=1)r[a]=oe(te(i,c,a));return{c(){e=b("h2"),e.textContent=t,s=z(),n=b("ul");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=k(a,"H2",{"data-svelte-h":!0}),j(e)!=="svelte-d4pyay"&&(e.textContent=t),s=D(a),n=k(a,"UL",{class:!0});var d=w(n);for(let o=0;o<r.length;o+=1)r[o].l(d);d.forEach(u),this.h()},h(){C(n,"class","list-group")},m(a,d){g(a,e,d),g(a,s,d),g(a,n,d);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,null)},p(a,d){if(d&1){c=x(a[0]);let o;for(o=0;o<c.length;o+=1){const _=te(a,c,o);r[o]?r[o].p(_,d):(r[o]=oe(_),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=c.length}},d(a){a&&(u(e),u(s),u(n)),ne(r,a)}}}function oe(i){let e,t=i[17]+"",s;return{c(){e=b("li"),s=U(t),this.h()},l(n){e=k(n,"LI",{class:!0});var c=w(e);s=Y(c,t),c.forEach(u),this.h()},h(){C(e,"class","list-group-item")},m(n,c){g(n,e,c),S(e,s)},p(n,c){c&1&&t!==(t=n[17]+"")&&K(s,t)},d(n){n&&u(e)}}}function be(i){let e,t="Shopping List Manager",s,n,c,r,a="Select a Meal Plan",d,o,_,P,F,A,E,I,O="Google Maps",H,M,h,L;function T(l,f){if(l[1])return me;if(l[2])return de}let N=T(i),v=N&&N(i),V=x(i[3]),m=[];for(let l=0;l<V.length;l+=1)m[l]=se(le(i,V,l));function Q(l,f){return l[0].length>0?ve:ge}let q=Q(i),y=q(i);return{c(){e=b("h1"),e.textContent=t,s=z(),v&&v.c(),n=z(),c=b("div"),r=b("label"),r.textContent=a,d=z(),o=b("select"),_=b("option"),P=U("Choose a Meal Plan");for(let l=0;l<m.length;l+=1)m[l].c();A=z(),y.c(),E=z(),I=b("h2"),I.textContent=O,H=z(),M=b("div"),this.h()},l(l){e=k(l,"H1",{"data-svelte-h":!0}),j(e)!=="svelte-8r4ain"&&(e.textContent=t),s=D(l),v&&v.l(l),n=D(l),c=k(l,"DIV",{class:!0});var f=w(c);r=k(f,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(r)!=="svelte-1wi81qg"&&(r.textContent=a),d=D(f),o=k(f,"SELECT",{id:!0,class:!0});var p=w(o);_=k(p,"OPTION",{});var B=w(_);P=Y(B,"Choose a Meal Plan"),B.forEach(u);for(let Z=0;Z<m.length;Z+=1)m[Z].l(p);p.forEach(u),f.forEach(u),A=D(l),y.l(l),E=D(l),I=k(l,"H2",{"data-svelte-h":!0}),j(I)!=="svelte-11folv8"&&(I.textContent=O),H=D(l),M=k(l,"DIV",{id:!0,class:!0}),w(M).forEach(u),this.h()},h(){C(r,"for","mealPlanSelector"),C(r,"class","form-label"),_.__value="",J(_,_.__value),_.disabled=!0,_.selected=F=i[4]===null,C(o,"id","mealPlanSelector"),C(o,"class","form-select"),i[4]===void 0&&ae(()=>i[7].call(o)),C(c,"class","mb-4"),C(M,"id","map"),C(M,"class","svelte-drfoty")},m(l,f){g(l,e,f),g(l,s,f),v&&v.m(l,f),g(l,n,f),g(l,c,f),S(c,r),S(c,d),S(c,o),S(o,_),S(_,P);for(let p=0;p<m.length;p+=1)m[p]&&m[p].m(o,null);$(o,i[4],!0),g(l,A,f),y.m(l,f),g(l,E,f),g(l,I,f),g(l,H,f),g(l,M,f),i[9](M),h||(L=[ee(o,"change",i[7]),ee(o,"change",i[8])],h=!0)},p(l,[f]){if(N===(N=T(l))&&v?v.p(l,f):(v&&v.d(1),v=N&&N(l),v&&(v.c(),v.m(n.parentNode,n))),f&24&&F!==(F=l[4]===null)&&(_.selected=F),f&8){V=x(l[3]);let p;for(p=0;p<V.length;p+=1){const B=le(l,V,p);m[p]?m[p].p(B,f):(m[p]=se(B),m[p].c(),m[p].m(o,null))}for(;p<m.length;p+=1)m[p].d(1);m.length=V.length}f&24&&$(o,l[4]),q===(q=Q(l))&&y?y.p(l,f):(y.d(1),y=q(l),y&&(y.c(),y.m(E.parentNode,E)))},i:R,o:R,d(l){l&&(u(e),u(s),u(n),u(c),u(A),u(E),u(I),u(H),u(M)),v&&v.d(l),ne(m,l),y.d(l),i[9](null),h=!1,ce(L)}}}const X="http://localhost:8080/api";function ke(i,e,t){let s;ie(i,_e,h=>t(12,s=h));let n=[],c=[],r=!1,a="",d=[],o=null,_=[],P;async function F(){t(1,r=!0),t(2,a="");try{n=(await G.get(`${X}/recipe`,{headers:{Authorization:"Bearer "+s}})).data,console.log("Fetched recipes:",n)}catch(h){t(2,a="Could not fetch recipes."),console.error(h)}finally{t(1,r=!1)}}async function A(){t(1,r=!0),t(2,a="");try{const h=await G.get(`${X}/mealplan`,{headers:{Authorization:"Bearer "+s}});t(3,d=h.data),console.log("Fetched meal plans:",d),console.log("Selected Meal Plan ID:",o)}catch(h){t(2,a="Could not fetch meal plans."),console.error(h)}finally{t(1,r=!1)}}async function E(h){console.log("hELLOR"),t(1,r=!0),t(2,a=""),_=[];try{_=(await G.get(`${X}/mealplan/${h}/recipes`,{headers:{Authorization:"Bearer "+s}})).data,console.log("Fetched recipes for selected meal plan:",_),t(0,c=_.flatMap(T=>T.ingredients))}catch(L){L.response?L.response.status===401?t(2,a="Unauthorized. Please check your login."):L.response.status===403?t(2,a="Forbidden. You do not have access."):t(2,a="Error fetching recipes: "+L.response.data):t(2,a="Network error or server not reachable."),console.error("Error fetching recipes for meal plan:",L)}finally{t(1,r=!1)}}function I(){P?new google.maps.Map(P,{center:{lat:47.4988,lng:8.7241},zoom:15}):console.error("Map container not found")}W(()=>{const h=document.createElement("script");h.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAZmEp7aVY1dFCvVMtH-i1Z2-1pgB-fX5o",h.async=!0,h.defer=!0,h.onload=I,document.head.appendChild(h)}),W(()=>{F(),A()});function O(){o=pe(this),t(4,o),t(3,d)}const H=()=>{console.log("Dropdown changed, selectedMealPlanId:",o),o&&E(o)};function M(h){fe[h?"unshift":"push"](()=>{P=h,t(5,P)})}return[c,r,a,d,o,P,E,O,H,M]}class Ie extends ue{constructor(e){super(),he(this,e,ke,be,re,{})}}export{Ie as component};
//# sourceMappingURL=6.BDTbE2g_.js.map
